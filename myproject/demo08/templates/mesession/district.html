<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Web的使用操作</title>
    <style>
        select{margin:10px;}
    </style>
    <script type="text/javascript" src="/static/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">
        //jQuery入口程序
        $(function(){
            $.ajax({
                url: "{% url 'district' 0 %}",
                type: 'get',
                data: {},
                dataType:'json',
                success:function(res){
                    var data = res.data;
                    for(var i=0;i<data.length;i++){
                        $('<option value="'+data[i].id+'">'+data[i].name+'</option>').appendTo('select:last')
                        //$('select:last').append('<option value="'+data[i].id+'">'+data[i].name+'</option>'); 

                    }
                },
                error:function(){
                    alert("ajax加载失败！");
                }
            });


            //获取最后一个下拉框并添加选中事件
            $("select").live('change',function(){
                //获取选中的id号
                var id = $(this).val();
                $(this).nextAll().remove();
                $.ajax({
                    url: "/district/"+id,
                    type: 'get',
                    data: {},
                    dataType:'json',
                    success:function(res){
                        if(res.data.length<1)
                            return;
                        var data = res.data;
                        var select = $("<select></select>")
                        for(var i=0;i<data.length;i++){
                            $('<option value="'+data[i].id+'">'+data[i].name+'</option>').appendTo(select)
                            //$('select:last').append('<option value="'+data[i].id+'">'+data[i].name+'</option>'); 
                        }
                        $("select:last").after(select);
                    }
                });
            });

        });
    </script>
</head>
<body>
        <h1>Ajax的城市级联信息操作</h1>

        <br/>

        <select>
            <option>-请选择-</option>
        </select>

</body>
</html>